{"version":3,"sources":["keyboard.min.js"],"names":["$","keyboard","keyboardPrivateMethod","element","options","this","settings","extend","fn","defaults","$element","init","prototype","$this","on","blur","test_html","join","length","append","show","setMargin","fillPlate","closeKeyBoard","enterPlateNum","removePlateNum","changePlateNum","getPlate","addActive","plateNum","val","text","plateArr","split","each","index","item","eq","$key_container","$key_container_width","window","width","parseInt","css","replace","key_width","find","_key_width","trim","row_keyNum","Math","floor","margin","marginLeft","marginRight","document","removeClass","hide","prefixPlate","$keyboardItemLength","_getPlateNumLength","$keyboardItemBoxIndex","closest","key","_isPlateNumItemSelected","_getPrefixPlate","_$keyboardItemLength","$plateNumItem","addClass","plateItemIndex","console","log","event","plateNumLength","isSelected","hasClass","instance","lookup","data","i","property1","property2","Zepto"],"mappings":"CAQA,SAAWA,GAIP,GAAIC,GACAC,CASJD,GAAW,WAEP,QAASA,GAASE,EAASC,GAEvBC,KAAKC,SAAWN,EAAEO,UAAWP,EAAEQ,GAAGP,SAASQ,SAAUL,GAErDC,KAAKK,SAAWV,EAAEG,GAElBE,KAAKM,OAmVT,MA/UAV,GAASW,WAELD,KAAK,WACH,GAAIE,GAAQR,IACZA,MAAKK,SAASI,GAAG,QAAQ,WACvBd,EAAEK,MAAMU,MACR,IAAIC,IAAa,6BACjC,0CACA,wFACA,wCACA,yCACA,0DACA,0DACA,0DACA,0DACA,0DACA,0DACA,0DACA,yBACA,oFACA,uBACA,wCACA,8FACA,oGACA,uBACA,mBACA,yCACA,6CACA,sCACA,+CACA,kDACA,qDACA,qDACA,qDACA,qDACA,qDACA,qDACA,qDACA,qDACA,qDACA,qDACA,qDACA,qDACA,qDACA,qDACA,qDACA,qDACA,qDACA,qDACA,qDACA,qDACA,qDACA,qDACA,qDACA,qDACA,qDACA,qDACA,qDACA,qDACA,qDACA,qDACA,qDACA,6BACA,0BACA,+CACA,kDACA,qDACA,qDACA,qDACA,qDACA,qDACA,qDACA,qDACA,qDACA,qDACA,qDACA,qDACA,qDACA,qDACA,qDACA,qDACA,qDACA,qDACA,qDACA,qDACA,qDACA,qDACA,qDACA,qDACA,qDACA,qDACA,6BACA,+CACA,kDACA,qDACA,qDACA,qDACA,qDACA,qDACA,qDACA,qDACA,qDACA,qDACA,qDACA,qDACA,qDACA,qDACA,qDACA,qDACA,qDACA,qDACA,qDACA,qDACA,qDACA,qDACA,qDACA,qDACA,qDACA,qDACA,qDACA,qDACA,qDACA,qDACA,qDACA,qDACA,qDACA,qDACA,qDACA,qDACA,qDACA,0EACA,0EACA,kFACA,kFACA,6BACA,0BACA,sBACA,mBACA,gBAAgBC,KAAK,GACCjB,GAAE,oBAAoBkB,SAC1BlB,EAAE,QAAQmB,OAAOH,GACjBhB,EAAE,oBAAoBoB,OACtBP,EAAMQ,YACNR,EAAMS,YACNT,EAAMU,gBACNV,EAAMW,gBACNX,EAA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","file":"../js/keyboard.min.js","sourcesContent":["/**\r\n * Created by hugohua on 14-4-1.\r\n * zepto keyboard template\r\n */\r\n\r\n/**\r\n * 将插件封装在一个闭包里面，防止外部代码污染  冲突\r\n */\r\n(function ($) {\r\n    /**\r\n     * 定义一个插件 keyboard\r\n     */\r\n    var keyboard,\r\n        keyboardPrivateMethod;  //插件的私有方法，也可以看做是插件的工具方法集\r\n\r\n    /**\r\n     * 这里是插件的主体部分\r\n     * 这里是一个自运行的单例模式。\r\n     * 这里之所以用一个 keyboard 的单例模式 包含一个 keyboard的类，主要是为了封装性，更好的划分代码块\r\n     * 同时 也 方便区分私有方法及公共方法\r\n     * PS：但有时私有方法为了方便还是写在了keyboard类里，这时建议私有方法前加上\"_\"\r\n     */\r\n    keyboard = (function () {\r\n\r\n        function keyboard(element, options) {\r\n            //将插件的默认参数及用户定义的参数合并到一个新的obj里\r\n            this.settings = $.extend({}, $.fn.keyboard.defaults, options);\r\n            //将dom jquery对象赋值给插件，方便后续调用\r\n            this.$element = $(element);\r\n            //初始化调用一下\r\n            this.init();\r\n        }\r\n\r\n\r\n        keyboard.prototype = {\r\n\r\n            init:function(){\r\n              var $this = this;\r\n              this.$element.on('click',function(){\r\n                $(this).blur();\r\n                var test_html = ['<div id=\"keyboard_dialog\">',\r\n'          <div class=\"plateNum_dialog\">',\r\n'              <div class=\"dialog_hd\"><strong class=\"dialog_title\">增加车牌</strong></div>',\r\n'              <div class=\"dialog_bd\">',\r\n'                <div class=\"plateNum\">',\r\n'                    <span class=\"plateNum_item\"></span>',\r\n'                    <span class=\"plateNum_item\"></span>',\r\n'                    <span class=\"plateNum_item\"></span>',\r\n'                    <span class=\"plateNum_item\"></span>',\r\n'                    <span class=\"plateNum_item\"></span>',\r\n'                    <span class=\"plateNum_item\"></span>',\r\n'                    <span class=\"plateNum_item\"></span>',\r\n'                </div>',\r\n'                <a href=\"javascript:\" class=\"text_btn\" id=\"removePlateNum\">清空</a>',\r\n'              </div>',\r\n'              <div class=\"dialog_ft\">',\r\n'                  <a href=\"javascript:;\" class=\"btn btn_default\" id=\"close_keyboard\">取消</a>',\r\n'                  <a href=\"javascript:;\" class=\"btn btn_primary\" id=\"saveAndCloseKeyboard\">确定</a>',\r\n'              </div>',\r\n'          </div>',\r\n'          <div class=\"ake_mask\"></div>',\r\n'          <div class=\"keyboard_container\">',\r\n'              <ul class=\"keyboard\">',\r\n'                  <li class=\"keyboard_item\">',\r\n'                    <div class=\"key_container\">',\r\n'                      <a href=\"javascript:;\">京</a>',\r\n'                      <a href=\"javascript:;\">沪</a>',\r\n'                      <a href=\"javascript:;\">粤</a>',\r\n'                      <a href=\"javascript:;\">津</a>',\r\n'                      <a href=\"javascript:;\">浙</a>',\r\n'                      <a href=\"javascript:;\">苏</a>',\r\n'                      <a href=\"javascript:;\">湘</a>',\r\n'                      <a href=\"javascript:;\">渝</a>',\r\n'                      <a href=\"javascript:;\">云</a>',\r\n'                      <a href=\"javascript:;\">豫</a>',\r\n'                      <a href=\"javascript:;\">皖</a>',\r\n'                      <a href=\"javascript:;\">桂</a>',\r\n'                      <a href=\"javascript:;\">新</a>',\r\n'                      <a href=\"javascript:;\">青</a>',\r\n'                      <a href=\"javascript:;\">琼</a>',\r\n'                      <a href=\"javascript:;\">闽</a>',\r\n'                      <a href=\"javascript:;\">蒙</a>',\r\n'                      <a href=\"javascript:;\">辽</a>',\r\n'                      <a href=\"javascript:;\">宁</a>',\r\n'                      <a href=\"javascript:;\">鲁</a>',\r\n'                      <a href=\"javascript:;\">陕</a>',\r\n'                      <a href=\"javascript:;\">晋</a>',\r\n'                      <a href=\"javascript:;\">吉</a>',\r\n'                      <a href=\"javascript:;\">冀</a>',\r\n'                      <a href=\"javascript:;\">黑</a>',\r\n'                      <a href=\"javascript:;\">甘</a>',\r\n'                      <a href=\"javascript:;\">鄂</a>',\r\n'                      <a href=\"javascript:;\">赣</a>',\r\n'                      <a href=\"javascript:;\">贵</a>',\r\n'                      <a href=\"javascript:;\">川</a>',\r\n'                      <a href=\"javascript:;\">藏</a>',\r\n'                    </div>',\r\n'                  </li>',\r\n'                  <li class=\"keyboard_item\">',\r\n'                    <div class=\"key_container\">',\r\n'                      <a href=\"javascript:;\">A</a>',\r\n'                      <a href=\"javascript:;\">B</a>',\r\n'                      <a href=\"javascript:;\">C</a>',\r\n'                      <a href=\"javascript:;\">D</a>',\r\n'                      <a href=\"javascript:;\">E</a>',\r\n'                      <a href=\"javascript:;\">F</a>',\r\n'                      <a href=\"javascript:;\">G</a>',\r\n'                      <a href=\"javascript:;\">H</a>',\r\n'                      <a href=\"javascript:;\">J</a>',\r\n'                      <a href=\"javascript:;\">K</a>',\r\n'                      <a href=\"javascript:;\">L</a>',\r\n'                      <a href=\"javascript:;\">M</a>',\r\n'                      <a href=\"javascript:;\">N</a>',\r\n'                      <a href=\"javascript:;\">O</a>',\r\n'                      <a href=\"javascript:;\">P</a>',\r\n'                      <a href=\"javascript:;\">Q</a>',\r\n'                      <a href=\"javascript:;\">R</a>',\r\n'                      <a href=\"javascript:;\">S</a>',\r\n'                      <a href=\"javascript:;\">T</a>',\r\n'                      <a href=\"javascript:;\">U</a>',\r\n'                      <a href=\"javascript:;\">V</a>',\r\n'                      <a href=\"javascript:;\">W</a>',\r\n'                      <a href=\"javascript:;\">X</a>',\r\n'                      <a href=\"javascript:;\">Y</a>',\r\n'                      <a href=\"javascript:;\">Z</a>',\r\n'                    </div>',\r\n'                  <li class=\"keyboard_item\">',\r\n'                    <div class=\"key_container\">',\r\n'                      <a href=\"javascript:;\">1</a>',\r\n'                      <a href=\"javascript:;\">2</a>',\r\n'                      <a href=\"javascript:;\">3</a>',\r\n'                      <a href=\"javascript:;\">4</a>',\r\n'                      <a href=\"javascript:;\">5</a>',\r\n'                      <a href=\"javascript:;\">6</a>',\r\n'                      <a href=\"javascript:;\">7</a>',\r\n'                      <a href=\"javascript:;\">8</a>',\r\n'                      <a href=\"javascript:;\">9</a>',\r\n'                      <a href=\"javascript:;\">0</a>',\r\n'                      <a href=\"javascript:;\">A</a>',\r\n'                      <a href=\"javascript:;\">B</a>',\r\n'                      <a href=\"javascript:;\">C</a>',\r\n'                      <a href=\"javascript:;\">D</a>',\r\n'                      <a href=\"javascript:;\">E</a>',\r\n'                      <a href=\"javascript:;\">F</a>',\r\n'                      <a href=\"javascript:;\">G</a>',\r\n'                      <a href=\"javascript:;\">H</a>',\r\n'                      <a href=\"javascript:;\">I</a>',\r\n'                      <a href=\"javascript:;\">J</a>',\r\n'                      <a href=\"javascript:;\">K</a>',\r\n'                      <a href=\"javascript:;\">L</a>',\r\n'                      <a href=\"javascript:;\">M</a>',\r\n'                      <a href=\"javascript:;\">N</a>',\r\n'                      <a href=\"javascript:;\">O</a>',\r\n'                      <a href=\"javascript:;\">P</a>',\r\n'                      <a href=\"javascript:;\">Q</a>',\r\n'                      <a href=\"javascript:;\">R</a>',\r\n'                      <a href=\"javascript:;\">S</a>',\r\n'                      <a href=\"javascript:;\">T</a>',\r\n'                      <a href=\"javascript:;\">U</a>',\r\n'                      <a href=\"javascript:;\">V</a>',\r\n'                      <a href=\"javascript:;\">W</a>',\r\n'                      <a href=\"javascript:;\">X</a>',\r\n'                      <a href=\"javascript:;\">Y</a>',\r\n'                      <a href=\"javascript:;\">Z</a>',\r\n'                      <a href=\"javascript:;\" class=\"lastPlateNum\">学</a>',\r\n'                      <a href=\"javascript:;\" class=\"lastPlateNum\">警</a>',\r\n'                      <a href=\"javascript:;\" class=\"gh_item lastPlateNum\">港</a>',\r\n'                      <a href=\"javascript:;\" class=\"gh_item lastPlateNum\">澳</a>',\r\n'                    </div>',\r\n'                  </li>',\r\n'              </ul>',\r\n'          </div>',\r\n'      </div>'].join(\"\");\r\n                if ( !$('#keyboard_dialog').length) {\r\n                  $('body').append(test_html);\r\n                  $('#keyboard_dialog').show();\r\n                  $this.setMargin();\r\n                  $this.fillPlate();\r\n                  $this.closeKeyBoard();\r\n                  $this.enterPlateNum();\r\n                  $this.removePlateNum();\r\n                  $this.changePlateNum();\r\n                  $this.getPlate();\r\n                  $this.addActive();\r\n                }\r\n                $('#keyboard_dialog').show();\r\n              });\r\n            },\r\n\r\n            fillPlate:function(){\r\n              var plateNum = this.$element.val();\r\n              if (plateNum) {\r\n                $('.plateNum_item').text('');\r\n                var plateArr = plateNum.split('');\r\n                $.each(plateArr,function(index,item){\r\n                  $('.plateNum_item').eq(index).text(item);\r\n                })\r\n              }\r\n            },\r\n\r\n            setMargin:function(){\r\n              var $key_container = $('.key_container');\r\n              //计算键盘盒子的宽度\r\n              var $key_container_width = $(window).width() - parseInt($('.keyboard').css('padding').replace(/px/,''))*2;\r\n              //计算一项键盘按键的最小宽度\r\n              var key_width = $key_container.find('a').width();\r\n              var _key_width = key_width + (parseInt($key_container.find('a').css('margin').replace(/px/,'').trim())*2);\r\n              //计算一行放几个键盘按键\r\n              var row_keyNum = Math.floor($key_container_width/_key_width);\r\n              //计算margin\r\n              var margin = ($key_container_width/row_keyNum -  key_width)/2;\r\n              //设置key margin\r\n              $key_container.find('a').css({marginLeft:margin,marginRight:margin});\r\n            },\r\n\r\n            closeKeyBoard:function(){\r\n              $(document).on('click','#close_keyboard',function(){\r\n                $('.plateNum_item').removeClass('selected');\r\n                $('#keyboard_dialog').hide();\r\n              })\r\n              $(document).on('click','#keyboard_dialog .ake_mask',function(){\r\n                $('.plateNum_item').removeClass('selected');\r\n                $('#keyboard_dialog').hide();\r\n              })\r\n            },\r\n\r\n            enterPlateNum:function(){\r\n              $(document).on('click','.keyboard_item a',function(){\r\n                if (!$(this).text()) return;\r\n                var $keyboardItemLength = keyboardPrivateMethod._getPlateNumLength();\r\n                var $keyboardItemBoxIndex = $(this).closest('.keyboard_item').index();\r\n                var key = $(this).text();\r\n                var prefixPlate;\r\n                //如果要更改已经填好的车牌\r\n                if (keyboardPrivateMethod._isPlateNumItemSelected()) {\r\n                  if ($keyboardItemBoxIndex === 2) {\r\n                    if (key === 'O') {\r\n                      key = 0;\r\n                    }\r\n                    if (key === 'I') {\r\n                      key = 1;\r\n                    }\r\n                  }\r\n                  $('.plateNum_item.selected').text(key).removeClass('selected');\r\n                  switch ($keyboardItemLength) {\r\n                    case 1 :\r\n                      $('.keyboard_item').hide().eq(1).show();\r\n                    break;\r\n                    default :\r\n                    var prefixPlate = keyboardPrivateMethod._getPrefixPlate();\r\n                    $('.keyboard_item').hide().eq(2).show();\r\n                    if ($keyboardItemLength === 6) {\r\n                      $('.lastPlateNum').show();\r\n                      if (prefixPlate !== '粤Z') {\r\n                        $('.gh_item').hide();\r\n                      }\r\n                    }else {\r\n                      $('.lastPlateNum').hide();\r\n                    }\r\n                    break;\r\n                  }\r\n                } else {\r\n                  //填车牌，跳转键盘\r\n                  switch ($keyboardItemBoxIndex) {\r\n                    case 0 :\r\n                    $('.plateNum_item').eq($keyboardItemLength).text(key);\r\n                    $('.keyboard_item').hide().eq(1).show();\r\n                    break;\r\n                    case 1:\r\n                    $('.plateNum_item').eq($keyboardItemLength).text(key);\r\n                    $('.keyboard_item').hide().eq(2).show();\r\n                    break;\r\n                    case 2 :\r\n                    var prefixPlate = keyboardPrivateMethod._getPrefixPlate();\r\n                    if (key === 'O') {\r\n                      key = 0;\r\n                    }\r\n                    if (key === 'I') {\r\n                      key = 1;\r\n                    }\r\n                    if ($keyboardItemLength < 7){\r\n                      $('.plateNum_item').eq($keyboardItemLength).text(key);\r\n                      var _$keyboardItemLength = keyboardPrivateMethod._getPlateNumLength();\r\n                      if (_$keyboardItemLength === 6) {\r\n                        $('.lastPlateNum').show();\r\n                        if (prefixPlate !== '粤Z') {\r\n                          $('.gh_item').hide();\r\n                        }\r\n                      }\r\n                    }\r\n                    break;\r\n                  }\r\n                }\r\n              })\r\n            },\r\n\r\n            removePlateNum:function(){\r\n              $(document).on('click','#removePlateNum',function(){\r\n                var $plateNumItem =  $('.plateNum_item');\r\n                $('.lastPlateNum').hide();\r\n                $plateNumItem.removeClass('selected');\r\n                $('.keyboard_item').hide().eq(0).show();\r\n                $plateNumItem.text('');\r\n              })\r\n            },\r\n\r\n            changePlateNum:function(){\r\n              $(document).on('click','.plateNum_item',function(){\r\n                var $this = $(this);\r\n                if($this.text()){\r\n                  $('.plateNum_item').removeClass('selected');\r\n                  $this.addClass('selected');\r\n                  var plateItemIndex = $(this).index();\r\n                  console.log(plateItemIndex)\r\n                  switch (plateItemIndex) {\r\n                    case 0 :\r\n                    $('.keyboard_item').hide().eq(0).show();\r\n                    break;\r\n                    case 1 :\r\n                    $('.keyboard_item').hide().eq(1).show();\r\n                    break;\r\n                    case 6 :\r\n                    var prefixPlate = keyboardPrivateMethod._getPrefixPlate();\r\n                    $('.keyboard_item').hide().eq(2).show();\r\n                    $('.lastPlateNum').show();\r\n                    if (prefixPlate !== '粤Z') {\r\n                      $('.gh_item').hide();\r\n                    }\r\n                    break;\r\n                    default :\r\n                    $('.keyboard_item').hide().eq(2).show();\r\n                    $('.gh_item').hide();\r\n                    $('.lastPlateNum').hide();\r\n                    break;\r\n                  }\r\n                }\r\n              })\r\n            },\r\n\r\n            getPlate:function() {\r\n              var $this = this;\r\n              $(document).on('click','#saveAndCloseKeyboard',function(){\r\n                var plateNum = '';\r\n                $('.plateNum_item').each(function(index,item){\r\n                  plateNum = plateNum + $(this).text();\r\n                });\r\n                $this.$element.val(plateNum);\r\n                $('#keyboard_dialog').hide();\r\n              })\r\n            },\r\n\r\n            addActive:function() {\r\n\r\n              $(document).on('touchstart','.key_container a',function(){\r\n                $(this).addClass('active');\r\n              });\r\n              $(document).on('touchend','.key_container a',function(){\r\n                $(this).removeClass('active');\r\n              });\r\n              //由于在手势触控拖拽离开焦点后元素仍停留在active状态，需要做如下处理\r\n              $(document).on(\"touchcancel\", \".key_container a\", function(event) {\r\n                $(this).removeClass(\"active\");\r\n              });\r\n              $(document).on(\"touchmove\", \".key_container a\", function(event) {\r\n                $(this).removeClass(\"active\");\r\n              });\r\n            }\r\n        };\r\n\r\n        return keyboard;\r\n\r\n    })();\r\n\r\n    /**\r\n     * 插件的私有方法\r\n     */\r\n    keyboardPrivateMethod = (function () {\r\n\r\n        function _getPlateNumLength() {\r\n          var plateNumLength = 0;\r\n          $('.plateNum_item').each(function(index,item){\r\n            if ($(this).text()) {\r\n              plateNumLength++;\r\n            }\r\n          });\r\n          return plateNumLength;\r\n        }\r\n\r\n        function _isPlateNumItemSelected(){\r\n          var isSelected;\r\n          $('.plateNum_item').each(function(index,item){\r\n            if($(this).hasClass('selected')){\r\n              isSelected = true;\r\n            }\r\n          });\r\n          return isSelected;\r\n        }\r\n\r\n        function _getPrefixPlate(){\r\n          return $('.plateNum_item').eq(0).text() + $('.plateNum_item').eq(1).text();\r\n        }\r\n\r\n        return {\r\n          _getPlateNumLength:_getPlateNumLength,\r\n          _isPlateNumItemSelected:_isPlateNumItemSelected,\r\n          _getPrefixPlate:_getPrefixPlate\r\n        }\r\n    })();\r\n\r\n    /**\r\n     * 这里是将keyboard对象 转为jq插件的形式进行调用\r\n     * 定义一个插件 keyboard\r\n     * zepto的data方法与jq的data方法不同\r\n     * 这里的实现方式可参考文章：http://trentrichardson.com/2013/08/20/creating-zepto-keyboards-from-jquery-keyboards/\r\n     */\r\n    $.fn.keyboard = function(options){\r\n        return this.each(function () {\r\n            var $this = $(this),\r\n                instance = $.fn.keyboard.lookup[$this.data('keyboard')];\r\n            if (!instance) {\r\n                //zepto的data方法只能保存字符串，所以用此方法解决一下\r\n                $.fn.keyboard.lookup[++$.fn.keyboard.lookup.i] = new keyboard(this,options);\r\n                $this.data('keyboard', $.fn.keyboard.lookup.i);\r\n                instance = $.fn.keyboard.lookup[$this.data('keyboard')];\r\n            }\r\n\r\n            if (typeof options === 'string') instance[options]();\r\n        })\r\n    };\r\n\r\n    $.fn.keyboard.lookup = {i: 0};\r\n\r\n    /**\r\n     * 插件的默认值\r\n     */\r\n    $.fn.keyboard.defaults = {\r\n        property1: 'value',\r\n        property2: 'value'\r\n    };\r\n\r\n     /**\r\n     * 优雅处： 通过data-xxx 的方式 实例化插件。\r\n     * 这样的话 在页面上就不需要显示调用了。\r\n     * 可以查看bootstrap 里面的JS插件写法\r\n     */\r\n      // $(function () {\r\n      //     return new keyboard($('[data-keyboard]'));\r\n      // });\r\n})(Zepto);\r\n"]}