{"version":3,"sources":["softKeyboard.min.js"],"names":["factory","define","amd","Zepto","$","kbPrivateMethod","Keyboard","element","options","this","extend","defaults","$element","init","pluginName","dataName","version","length","text","normal","energy","title","buttonText","isAddColor","isAutoFill","beforeOpenFn","confirmCallback","hiddenCallback","prototype","_this","_initKbHtml","off","on","isOpen","blur","initShowEvt","curVal","_len","license","_getVal","headerTxt","buttonTxt","changePlate","fillPlate","setConfirmBtn","showKeyboard","setMargin","bindClickPanelEvts","$Keyboard","hasClass","addClass","hideKeyboard","plateColor","val","removeClass","data","find","removeAttr","getLicense","isLen","$PlateItem","Val","color","each","_val","total_len","$PlateBox","$PlateTypeTitle","normal_text","energy_text","show","hide","_license","_idx","licenseArr","split","index","item","eq","siblings","togglePanel","$KeyboardBox","$SingleKb","box_width","window","width","Number","css","replace","single_width","_single_width","row_num","margin","Math","floor","margin-left","margin-right","IsHkMacao","indexOf","$KeyboardItem","deleteOneEvts","isDelAll","_licenseLen","_index","_length","e","stopPropagation","$This","_txt","_active","setTimeout","_type","_setVal","_getTemplate","cssFile","_template","html","append","_judgeEleType","$ele","_nodeName","get","nodeName","isInput","value","placeholder","undefined","attr","old","fn","option","$this","kbData","Constructor","noConflict","document","ready","opts","call"],"mappings":"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","file":"../js/softKeyboard.min.js","sourcesContent":["/*!\r\n * Zepto 插件模板  @author jnoodle\r\n * Keyboard plugin Created by eireenyin on 17-03-01 *\r\n */\r\n\r\n/**\r\n * 让插件支持 AMD 标准的模块加载模式\r\n *\r\n * 如果不需要支持 AMD，也可以直接使用：\r\n * (function($){ ... })(Zepto);\r\n *\r\n * 将插件封装在闭包里面，防止外部污染\r\n */\r\n/**\r\n * \r\n        自定义键盘\r\n          -属性，若不是需要车牌为空时显示占位符，则给添加 属性 placeholder\r\n        参数：\r\n          length （Number): 车牌的长度，默认为7，只有 7 或 8 两个取值\r\n        调用方式：(建议用第二种方式)\r\n          1： $('#id').keyboard();\r\n              可传参数： 如果要默认输入新能源车牌，则 $('#id').keyboard({length:8})\r\n          2: 直接在给元素赋属性   data-role=\"keyboard\"\r\n             如果想要打开即是输入新能源车牌， 则  data-length=\"8\" ,如果默认为7则可不传\r\n         \r\n        获取车牌颜色： （默认为蓝牌）会自动给元素加上一个 data-color=\"blue/yellow/black/white\"的属性\r\n         获取颜色-》 $('#id').data('color');\r\n */\r\n;\r\n(function (factory) {\r\n\r\n    // 如果要兼容 CMD 等其他标准，可以在下面添加条件，比如：\r\n    // CMD: typeof define === 'function' && define.cmd\r\n    // UMD: typeof exports === 'object'\r\n    if (typeof define === 'function' && define.amd) {\r\n        // AMD\r\n        define(['zepto'], factory);\r\n    } else {\r\n        factory(Zepto);\r\n        // 如果要兼容 Zepto，可以改写，比如使用：factory(Zepto||jQuery)\r\n    }\r\n}(function ($) {\r\n    'use strict';\r\n\r\n    /**\r\n     * 定义插件的构造方法\r\n     * @param element 选择器对象\r\n     * @param options 配置项\r\n     * @constructor\r\n     */\r\n    var Keyboard = function (element, options) {\r\n\r\n        //合并参数设置\r\n        this.options = $.extend({}, Keyboard.defaults, options);\r\n\r\n        //将选择器对象赋值给插件，方便后续调用\r\n        this.$element = $(element);\r\n\r\n        //进行一些初始化工作\r\n        this.init();\r\n    };\r\n    var kbPrivateMethod;\r\n\r\n    /**\r\n     * 插件名称，即调用时的名称（$.fn.pluginName）\r\n     * @type {string}\r\n     */\r\n    Keyboard.pluginName = \"keyboard\";\r\n\r\n    /**\r\n     * 插件缓存名称，插件通过 data 方法缓存在 dom 结构里，存储数据的名称\r\n     * @type {string}\r\n     */\r\n    Keyboard.dataName = \"keyboard\";\r\n\r\n    /**\r\n     * 插件版本\r\n     * @type {string}\r\n     */\r\n    Keyboard.version = \"2.0.0\";\r\n\r\n    /**\r\n     * 插件默认配置项\r\n     * @type {{}}\r\n     */\r\n    Keyboard.defaults = {\r\n      length: 7,\r\n      text: {\r\n        normal: '普通车牌录入',\r\n        energy: '新能源车牌录入'\r\n      },\r\n      title: '添加车牌',\r\n      buttonText: '添加',\r\n      isAddColor: false,\r\n      isAutoFill: true,\r\n      beforeOpenFn: null,\r\n      confirmCallback: null,\r\n      hiddenCallback: null\r\n    };\r\n\r\n    /**\r\n     * 定义插件的方法\r\n     * @type {{}}\r\n     */\r\n    Keyboard.prototype = {\r\n      init: function () {\r\n        var _this = this;\r\n        if($('#keyboard_wrapper').length === 0 ) {\r\n            kbPrivateMethod._initKbHtml();\r\n        }\r\n        \r\n        this.$element.off('click').on('click',function(){\r\n          var isOpen = true;\r\n          $(this).blur();\r\n          if(_this.options.beforeOpenFn) {\r\n            isOpen = _this.options.beforeOpenFn();\r\n          }\r\n          if(isOpen) {\r\n            _this.initShowEvt();\r\n          }\r\n        })\r\n      },\r\n\r\n      initShowEvt: function(curVal, _len) {\r\n        var options = this.options;\r\n        var license = options.license;\r\n        curVal = kbPrivateMethod._getVal(this.$element, license);\r\n        _len = options.length;\r\n        var headerTxt = options.title;\r\n        var buttonTxt = options.buttonText;\r\n        $('#header_title').text(headerTxt);\r\n        $('#kb_confirm').text(buttonTxt);\r\n        this.changePlate(_len);\r\n        this.fillPlate(curVal,_len);\r\n        this.setConfirmBtn();\r\n        this.showKeyboard();\r\n        this.setMargin();\r\n        this.bindClickPanelEvts();\r\n      },\r\n\r\n      showKeyboard: function() {\r\n        var $Keyboard = $('#keyboard_wrapper');\r\n        if(!$Keyboard.hasClass('toggle')) {\r\n            $Keyboard.addClass('toggle');\r\n        }\r\n      },\r\n\r\n      hideKeyboard: function() {\r\n        var $Keyboard = $('#keyboard_wrapper'),\r\n            plateColor = $('input[name=\"plate-color\"]:checked').val();\r\n        if($Keyboard.hasClass('toggle')) {\r\n            $Keyboard.removeClass('toggle');\r\n        }\r\n        if ($('#plate_type_title').data('turn-type') === 7) {\r\n           this.$element.data('color','');\r\n        } else {\r\n          this.$element.data('color',plateColor);\r\n        }\r\n        $Keyboard.find('.kb-item').removeAttr('style');\r\n        if(this.options.hiddenCallback) {\r\n            this.options.hiddenCallback(this.getLicense());\r\n        }\r\n      },\r\n\r\n      //获取当前已经选择的车牌， \r\n      getLicense: function(isLen) {\r\n        var $PlateItem = $('#plate_box').find('.plate-item:not(.ake-hide)'),\r\n            Val = '',\r\n            color = $('input[name=\"plate-color\"]:checked').val();\r\n        $PlateItem.each(function() {\r\n          var _val = $(this).text();\r\n          if(!_val) {return false;}\r\n          Val += _val;\r\n        })\r\n        return isLen ? Val.length : (this.options.isAddColor ? Val + color : Val);\r\n      },\r\n\r\n      changePlate: function (total_len) {\r\n        var $PlateBox = $('#keyboard_wrapper #plate_box'),\r\n            // $HeaderTitle = $('#header_title'),\r\n            $PlateTypeTitle = $('#plate_type_title'),\r\n            normal_text = this.options.text.normal,\r\n            energy_text = this.options.text.energy;\r\n        if(total_len == 7) {\r\n            $PlateBox.removeClass('has-eight-item');\r\n            $PlateBox.find('.eighth-item').text('').addClass('ake-hide');\r\n            // $HeaderTitle.text(normal_text);\r\n            $PlateTypeTitle.text(energy_text+'>>').data('turn-type',8);\r\n            $('.blue-plate-box').show();\r\n        } else if(total_len == 8) {\r\n            $PlateBox.addClass('has-eight-item');\r\n            $PlateBox.find('.eighth-item').text('').removeClass('ake-hide');\r\n            // $HeaderTitle.text(energy_text);\r\n            $PlateTypeTitle.text(normal_text+'>>').data('turn-type',7);\r\n            $('.blue-plate-box').hide();\r\n        }\r\n      },\r\n\r\n      //填充已輸入的車牌\r\n      fillPlate: function (_license,total_len) {\r\n        var $PlateItem = $('#keyboard_wrapper #plate_box').find('.plate-item'),_idx = 0;\r\n        $PlateItem.text('');\r\n        if(_license) {\r\n            var licenseArr = _license.split('');\r\n            $.each(licenseArr, function(index, item) {\r\n              $PlateItem.eq(index).text(item);\r\n              _idx = index;\r\n            })\r\n            _idx = _idx + 1 < total_len ? _idx + 1 : total_len - 1;\r\n        }\r\n        $PlateItem.eq(_idx).addClass('active').siblings().removeClass('active');\r\n        this.togglePanel(_idx);\r\n      },\r\n\r\n      setMargin: function() {\r\n        var $KeyboardBox = $('#keyboard_box'),\r\n            $SingleKb = $KeyboardBox.find('.operate-list').find('.kb-item').eq(0),\r\n            box_width = $(window).width() - Number($KeyboardBox.css('padding-left').replace(/px/,'')) * 2, //键盘盒子宽度\r\n            single_width = $SingleKb.width(), //单个按键宽度\r\n            _single_width = single_width + Number($SingleKb.css('margin-left').replace(/px/,'')) * 2, //单个按键宽度\r\n            row_num = 0,margin = 0;\r\n        \r\n        row_num = Math.floor(box_width / _single_width); //计算一行放几个按键\r\n        margin = (box_width / row_num - single_width) / 2; // 计算每一个按键的左右margin\r\n\r\n        $KeyboardBox.find('.kb-item').css({'margin-left':margin,'margin-right': margin});\r\n      },\r\n      //切换\r\n      togglePanel: function (index) {\r\n        var $KeyboardItem = $('#keyboard_box').find('li:not(.operate-list)');\r\n        var _len = this.options.length;\r\n        var _license = this.getLicense();\r\n        function IsHkMacao() {\r\n            if(_license.indexOf('粤Z') > -1) {\r\n                $KeyboardItem.eq(1).find('.last-item').hide();\r\n                $KeyboardItem.eq(1).find('.hk-macao-item').show();\r\n            } else {\r\n                $KeyboardItem.eq(1).find('.last-item').show();\r\n                $KeyboardItem.eq(1).find('.hk-macao-item').hide();\r\n            }\r\n        }\r\n        $KeyboardItem.eq(2).find('.not-pos-two').removeClass('ake-hide');\r\n        switch (index) {\r\n          case 0: \r\n            $KeyboardItem.addClass('ake-hide');\r\n            $KeyboardItem.eq(0).removeClass('ake-hide');\r\n            break;\r\n          case 1:\r\n            $KeyboardItem.addClass('ake-hide');\r\n            $KeyboardItem.eq(2).removeClass('ake-hide');\r\n            $KeyboardItem.eq(1).find('.last-item,.not-pos-two').addClass('ake-hide');\r\n            break;\r\n          case 2:case 3:case 4: case 5:\r\n            $KeyboardItem.addClass('ake-hide');\r\n            $KeyboardItem.eq(1).removeClass('ake-hide');\r\n            $KeyboardItem.eq(2).removeClass('ake-hide');\r\n            $KeyboardItem.eq(1).find('.last-item').addClass('ake-hide');\r\n            break;\r\n          case 6:\r\n            $KeyboardItem.addClass('ake-hide');\r\n            $KeyboardItem.eq(1).removeClass('ake-hide');\r\n            $KeyboardItem.eq(2).removeClass('ake-hide');\r\n            if(_len == 7) {\r\n              $KeyboardItem.eq(1).find('.last-item').removeClass('ake-hide');\r\n              IsHkMacao();\r\n            } else {\r\n              $KeyboardItem.eq(1).find('.last-item').addClass('ake-hide');\r\n            }\r\n            \r\n            break;\r\n          case 7:\r\n            if(_len == 7) {break;}\r\n            $KeyboardItem.addClass('ake-hide');\r\n            $KeyboardItem.eq(1).removeClass('ake-hide');\r\n            $KeyboardItem.eq(2).removeClass('ake-hide');\r\n            $KeyboardItem.eq(1).find('.last-item').removeClass('ake-hide');\r\n            IsHkMacao();\r\n            break;\r\n          default: \r\n            $KeyboardItem.addClass('ake-hide');\r\n            $KeyboardItem.eq(0).removeClass('ake-hide');\r\n            break;\r\n        }\r\n      },\r\n\r\n      deleteOneEvts: function(isDelAll) {\r\n        var $PlateItem = $('#plate_box').find('.plate-item'),\r\n            _licenseLen = this.getLicense(1),\r\n            _index = _licenseLen;\r\n        if(isDelAll) {\r\n            $PlateItem.each(function(){\r\n                $(this).text('');\r\n            })\r\n            $PlateItem.eq(0).addClass('active').siblings().removeClass('active');\r\n            _index = 0;\r\n        } else {\r\n            if(_licenseLen > 0) {\r\n              $PlateItem.eq(_licenseLen - 1).text('').addClass('active').siblings().removeClass('active');\r\n              _index --;\r\n            } else {\r\n              $PlateItem.eq(0).addClass('active').siblings().removeClass('active');\r\n              _index = 0;\r\n            }\r\n        }\r\n        this.togglePanel(_index);\r\n      },\r\n\r\n      setConfirmBtn: function() {\r\n        var _length = this.options.length,\r\n            _licenseLen = this.getLicense(1);\r\n        if(_licenseLen == _length) {\r\n            $('#kb_confirm').removeClass('hide');\r\n        } else {\r\n            $('#kb_confirm').addClass('hide');\r\n        }\r\n      },\r\n\r\n      bindClickPanelEvts: function() {\r\n        var _this = this;\r\n        //点击关闭\r\n        $('#keyboard_wrapper #close_keyboard').off().on('click',function(e) {\r\n          _this.hideKeyboard();\r\n        })\r\n        \r\n        //点击选择某一个车牌\r\n        $('#plate_box .plate-item').off().on('click',function(e) {\r\n          e.stopPropagation();\r\n          var $This = $(this),\r\n              _txt = $This.text(),\r\n              _index = $This.index(),\r\n              _active = $('#plate_box').find('.active');\r\n          if (_txt) {\r\n            if(_index != _active) {\r\n              $This.addClass('active').siblings().removeClass('active');\r\n              _this.togglePanel(_index);\r\n            }\r\n          } else {\r\n            var _licenseLen = _this.getLicense(1);\r\n            $('#plate_box .plate-item').eq(_licenseLen).addClass('active').siblings().removeClass('active');\r\n            _this.togglePanel(_licenseLen);\r\n          }\r\n        })\r\n\r\n        // 点击每一个车牌键盘值\r\n        $('#keyboard_box .kb-item').off().on('click',function(e) {\r\n            e.stopPropagation();\r\n            if($(this).hasClass('placehold-item')){return;}\r\n            $('#keyboard_box .kb-item').removeClass('active');\r\n            var $This = $(this),\r\n                $PlateItem = $('#plate_box').find('.plate-item'),\r\n                _licenseLen = _this.getLicense(1),\r\n                _length = _this.options.length;\r\n            if($This.hasClass('clear-all')) {\r\n                _this.deleteOneEvts(1);\r\n                _this.setConfirmBtn();\r\n            } else if($This.hasClass('delete-one')) {\r\n                _this.deleteOneEvts();\r\n                _this.setConfirmBtn();\r\n            } else {\r\n              $This.addClass('active');\r\n              var _txt = $This.text(),\r\n                  _active = $('#plate_box').find('.active').index(),\r\n                  _index = _active;\r\n              if($This.hasClass('change-to-num') && _active > 1) {\r\n                _txt = _txt === 'O' ? '0' : '1';\r\n              }\r\n              \r\n              $PlateItem.eq(_active).text(_txt);\r\n              if(_active + 1 < _length) {\r\n                $PlateItem.eq(_active + 1).addClass('active').siblings().removeClass('active');\r\n                _active ++;\r\n              }\r\n              if(_active != _index) {\r\n                _this.togglePanel(_active);\r\n              }\r\n\r\n              _this.setConfirmBtn();\r\n              \r\n              setTimeout(function(){\r\n                $This.removeClass('active');\r\n              },100);\r\n            }\r\n        })\r\n\r\n        //点击切换新能源车牌和普通车牌录入\r\n        $('#plate_type_title').off().on('click',function(e){\r\n            e.stopPropagation();\r\n            var _type = Number($(this).data('turn-type')),\r\n                _licenseLen = -1,\r\n                _active = 0;\r\n            _this.options.length = _type;\r\n            _this.changePlate(_type);\r\n            _this.fillPlate('');\r\n\r\n            // _licenseLen = _this.getLicense(1);\r\n            // _active = _licenseLen < _type ? _licenseLen : _type - 1;\r\n            _this.togglePanel(_active);\r\n            _this.setConfirmBtn();\r\n            $('#plate_box .plate-item').eq(_active).addClass('active').siblings().removeClass('active');\r\n        })\r\n\r\n        //点击确定\r\n        $('#kb_confirm').off().on('click',function(e) {\r\n            e.stopPropagation();\r\n            if(_this.options.isAutoFill) {\r\n                kbPrivateMethod._setVal(_this.$element, _this.getLicense());\r\n            }\r\n            if(_this.options.confirmCallback) {\r\n                _this.options.confirmCallback(_this.getLicense());\r\n            }\r\n            _this.hideKeyboard();\r\n        })\r\n      }\r\n    };\r\n\r\n    //私有方法\r\n    kbPrivateMethod = (function () {\r\n      //獲取自定義鍵盤的html模板和css文件\r\n      function _getTemplate () {\r\n        var cssFile = '<link rel=\"stylesheet\" href=\"dist/css/keyboard.min.css\">';\r\n        var _template = '<div id=\"keyboard_wrapper\" class=\"keyboard-wrapper\">'+\r\n            '        <div class=\"keyboard-header\">'+\r\n            '          <h3 id=\"header_title\" class=\"header-title\">添加车牌</h3>'+\r\n            '          <a id=\"close_keyboard\" class=\"close\">&times;</a>'+\r\n            '          <a id=\"kb_confirm\" class=\"add-btn\">添加</a>'+\r\n            '        </div>'+\r\n            '        <div class=\"plate-wrapper\">'+\r\n            '          <div id=\"plate_box\" class=\"plate-box\">'+\r\n            '            <span class=\"plate-item\"></span>'+\r\n            '            <span class=\"plate-item\"></span>'+\r\n            '            <span class=\"plate-item\"></span>'+\r\n            '            <span class=\"plate-item\"></span>'+\r\n            '            <span class=\"plate-item\"></span>'+\r\n            '            <span class=\"plate-item\"></span>'+\r\n            '            <span class=\"plate-item\"></span>'+\r\n            '            <span class=\"plate-item eighth-item\"></span>'+\r\n            '          </div>'+\r\n            '          <div class=\"plate-setting\">'+\r\n            '            <div class=\"blue-plate-box clearfix\">'+\r\n            '<div class=\"iradio-box blue\">'+\r\n            '                <input type=\"radio\" name=\"plate-color\" id=\"blue\" class=\"iradio\" value=\"蓝\" checked><i class=\"icon\"></i>'+\r\n            '                <label class=\"iradio-text blue\" for=\"blue\">蓝牌</label>'+\r\n            '              </div>'+\r\n            '              <div class=\"iradio-box yellow\">'+\r\n            '                <input type=\"radio\" name=\"plate-color\" id=\"yellow\" class=\"iradio\" value=\"黄\"><i class=\"icon\"></i>'+\r\n            '                <label class=\"iradio-text yellow\" for=\"yellow\">黄牌</label>'+\r\n            '              </div>'+\r\n            '              <div class=\"iradio-box white\">'+\r\n            '                <input type=\"radio\" name=\"plate-color\" id=\"white\" class=\"iradio\" value=\"白\"><i class=\"icon\"></i>'+\r\n            '                <label class=\"iradio-text white\" for=\"white\">白牌</label>'+\r\n            '              </div>'+\r\n            '              <div class=\"iradio-box black\">'+\r\n            '                <input type=\"radio\" name=\"plate-color\" id=\"black\" class=\"iradio\" value=\"黑\"><i class=\"icon\"></i>'+\r\n            '                <label class=\"iradio-text black\" for=\"black\">黑牌</label>'+\r\n            '              </div>' +\r\n            '              <div class=\"iradio-box green\">'+\r\n            '                <input type=\"radio\" name=\"plate-color\" id=\"green\" class=\"iradio\" value=\"绿\"><i class=\"icon\"></i>'+\r\n            '                <label class=\"iradio-text green\" for=\"green\">新能源</label>'+\r\n            '              </div>'+\r\n            '            </div>'+\r\n            '            <div class=\"plate-type-box\">'+\r\n            '              <span id=\"plate_type_title\" class=\"plate-type\">新能源车牌录入&gt;&gt;</span>'+\r\n            '            </div>'+\r\n            '          </div>'+\r\n            // '          <a id=\"kb_confirm\" class=\"ake-btn confirm-btn hide\"><span class=\"lt20\">确</span>定</a>'+\r\n            '        </div>'+\r\n            '        <div class=\"keyboard-container\">'+\r\n            '          <ul id=\"keyboard_box\" class=\"keyboard-box\">'+\r\n            '            <li class=\"keyboard-list\">'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">京</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">沪</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">粤</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">津</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">浙</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">苏</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">湘</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">渝</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">云</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">豫</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">皖</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">陕</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">桂</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">新</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">青</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">琼</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">闽</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">蒙</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">辽</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">宁</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">鲁</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">晋</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">吉</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">冀</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">黑</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">台</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">甘</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">鄂</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">赣</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">贵</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">川</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">藏</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item placehold-item\"></a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item placehold-item\"></a>'+\r\n            '            </li>'+\r\n            '            <li class=\"keyboard-list ake-hide\">'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">1</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">2</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">3</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">4</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">5</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">6</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">7</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">8</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">9</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">0</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item last-item ake-hide\">学</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item last-item ake-hide\">警</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item last-item hk-macao-item ake-hide\">港</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item last-item hk-macao-item ake-hide\">澳</a>'+\r\n            '            </li>'+\r\n            '            <li class=\"keyboard-list ake-hide\">'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">A</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">B</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">C</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">D</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">E</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">F</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">G</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">H</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item not-pos-two change-to-num\">I</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">J</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">K</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">L</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">M</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">N</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item change-to-num\">O</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">P</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">Q</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">R</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">S</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">T</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">U</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">V</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">W</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">X</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">Y</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">Z</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item placehold-item\"></a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item placehold-item\"></a>'+\r\n            '            </li>'+\r\n            '            <li class=\"keyboard-list operate-list\">'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item clear-all\">重输</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item delete-one\"><span class=\"delete-icon\">&times;</span></a>'+\r\n            '            </li>'+\r\n            '          </ul>'+\r\n            '        </div>'+\r\n            '      </div>';\r\n        return {\r\n            css: cssFile,\r\n            html: _template\r\n        }\r\n      }\r\n      //初始\r\n      function _initKbHtml () {\r\n        var _template = _getTemplate();\r\n        $('html').find('head').eq(0).append(_template.css);\r\n        $('body').append(_template.html);\r\n      }\r\n\r\n      //判断绑定插件的元素时输入型的还是显示型的\r\n      function _judgeEleType ($ele) {\r\n        var _nodeName = $ele.get(0).nodeName,\r\n            isInput = false;\r\n        if(_nodeName == 'INPUT' || _nodeName == 'TEXTAREA') {\r\n          isInput = true;\r\n        }\r\n        return isInput;\r\n      }\r\n\r\n      //根据绑定插件元素的不同类型，取值和设置值的方式相应变化\r\n      function _getVal($ele, value) {\r\n        var Val = '';\r\n        var placeholder = '';\r\n        if(value == undefined) {\r\n          var isInput = _judgeEleType($ele);\r\n          Val = isInput ? $ele.val() : $ele.text();\r\n          placeholder = $ele.attr('placeholder');\r\n        } else {\r\n          Val = value;\r\n        }\r\n        return Val == placeholder ? '' : Val; //当元素类型为显示型的，则当其text的值与placeholder的值相等时，认为其值为空\r\n      }\r\n\r\n      function _setVal($ele, Val) {\r\n        var isInput = _judgeEleType($ele);\r\n        if(isInput) {\r\n          $ele.val(Val);\r\n        } else {\r\n          //如果值为空的时候，显示\r\n          $ele.text(Val ? Val : $ele.attr('placeholder'));\r\n        }\r\n      }\r\n\r\n      return {\r\n        _getTemplate: _getTemplate,\r\n        _initKbHtml: _initKbHtml,\r\n        _judgeEleType: _judgeEleType,\r\n        _getVal: _getVal,\r\n        _setVal: _setVal\r\n      }\r\n    })();\r\n\r\n    /**\r\n     * 缓存同名插件\r\n     */\r\n    var old = $.fn[Keyboard.pluginName];\r\n\r\n    /**\r\n     * 定义插件，扩展$.fn，为Zepto对象提供新的插件方法\r\n     * 调用方式：$.fn.pluginName()\r\n     * @param option {string/object}\r\n     */\r\n    $.fn[Keyboard.pluginName] = function (option) {\r\n        return this.each(function () {\r\n            var $this = $(this);\r\n\r\n            var data = $.fn[Keyboard.pluginName].kbData[$this.data(Keyboard.dataName)];\r\n            var options = typeof option == 'object' && option;\r\n\r\n            //只实例化一次，后续如果再次调用了该插件时，则直接获取缓存的对象\r\n            if (!data) {\r\n                //zepto的data方法只能保存字符串，所以用此方法解决一下\r\n                $.fn[Keyboard.pluginName].kbData[++$.fn[Keyboard.pluginName].kbData.index] = new Keyboard(this, options);\r\n                $this.data(Keyboard.dataName, $.fn[Keyboard.pluginName].kbData.index);\r\n                data = $.fn[Keyboard.pluginName].kbData[$this.data(Keyboard.dataName)];\r\n            }\r\n\r\n            //如果插件的参数是一个字符串，则直接调用插件的名称为此字符串方法\r\n            if (typeof option == 'string') data[option]();\r\n        });\r\n    };\r\n\r\n    /**\r\n     * zepto的data方法只能保存字符串，所以用一个对象来存储data\r\n     * @type {{index: number}}\r\n     */\r\n    $.fn[Keyboard.pluginName].kbData = {index: 0};\r\n\r\n    $.fn[Keyboard.pluginName].Constructor = Keyboard;\r\n\r\n    /**\r\n     * 为插件增加 noConflict 方法，在插件重名时可以释放控制权\r\n     * @returns {*}\r\n     */\r\n    $.fn[Keyboard.pluginName].noConflict = function () {\r\n        $.fn[Keyboard.pluginName] = old;\r\n        return this\r\n    };\r\n\r\n    /**\r\n     * 可选：\r\n     * 通过在 dom 上定义 data-role='pluginName' 的方式，自动实例化插件，省去页面编写代码\r\n     * 在这里还可以扩展更多配置，仅仅通过 data 属性 API 就能使用插件\r\n     */\r\n    $(document).ready(function () {\r\n        $('[data-role=\"' + Keyboard.pluginName + '\"]').each(function () {\r\n            var $this = $(this);\r\n            var opts = {};\r\n            var data = $.fn[Keyboard.pluginName].kbData[$this.data(Keyboard.dataName)];\r\n\r\n            opts['length'] = $this.data('length');\r\n            opts['hiddenCallback'] = $this.data('hiddenCallback');\r\n\r\n            $(this).data('color','blue');//默认为蓝牌\r\n\r\n            $.fn[Keyboard.pluginName].call($this, opts);\r\n        });\r\n    });\r\n}));\r\n\r\n"]}