{"version":3,"sources":["softKeyboard.min.js"],"names":["factory","define","amd","Zepto","$","kbPrivateMethod","Keyboard","element","options","this","extend","defaults","$element","init","pluginName","dataName","version","length","text","normal","energy","title","buttonText","isAddColor","isAutoFill","beforeOpenFn","confirmCallback","hiddenCallback","scanCallback","prototype","_this","_initKbHtml","off","on","isOpen","blur","initShowEvt","curVal","_len","license","_getVal","headerTxt","buttonTxt","changePlate","fillPlate","setConfirmBtn","showKeyboard","setMargin","bindClickPanelEvts","$Keyboard","hasClass","addClass","hideKeyboard","$CheckedColor","plateColor","val","removeClass","data","find","removeAttr","getLicense","isLen","$PlateItem","Val","color","each","_val","total_len","$PlateBox","_license","_idx","licenseArr","split","index","item","eq","siblings","togglePanel","$KeyboardBox","$SingleKb","box_width","window","width","Number","css","replace","single_width","_single_width","row_num","margin","Math","floor","margin-left","margin-right","IsHkMacao","indexOf","$KeyboardItem","hide","show","deleteOneEvts","isDelAll","_licenseLen","_index","_length","type","e","stopPropagation","$This","_txt","_active","setTimeout","_type","result","_setVal","$CardTickerBox","$PlateColorBox","$ConfirmBtn","_getTemplate","cssFile","_template","html","append","_judgeEleType","$ele","_nodeName","get","nodeName","isInput","value","placeholder","undefined","attr","old","fn","option","$this","kbData","Constructor","noConflict","document","ready","opts","call"],"mappings":"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","file":"../js/softKeyboard.min.js","sourcesContent":["/*!\r\n * Zepto 插件模板  @author jnoodle\r\n * Keyboard plugin Created by eireenyin on 17-03-01 *\r\n */\r\n\r\n/**\r\n * 让插件支持 AMD 标准的模块加载模式\r\n *\r\n * 如果不需要支持 AMD，也可以直接使用：\r\n * (function($){ ... })(Zepto);\r\n *\r\n * 将插件封装在闭包里面，防止外部污染\r\n */\r\n/**\r\n * \r\n        自定义键盘\r\n          -属性，若不是需要车牌为空时显示占位符，则给添加 属性 placeholder\r\n        参数：\r\n          length （Number): 车牌的长度，默认为7，只有 7 或 8 两个取值\r\n        调用方式：(建议用第二种方式)\r\n          1： $('#id').keyboard();\r\n              可传参数： 如果要默认输入新能源车牌，则 $('#id').keyboard({length:8})\r\n          2: 直接在给元素赋属性   data-role=\"keyboard\"\r\n             如果想要打开即是输入新能源车牌， 则  data-length=\"8\" ,如果默认为7则可不传\r\n         \r\n        获取车牌颜色： （默认为蓝牌）会自动给元素加上一个 data-color=\"blue/yellow/black/white\"的属性\r\n         获取颜色-》 $('#id').data('color');\r\n */\r\n;\r\n(function (factory) {\r\n\r\n    // 如果要兼容 CMD 等其他标准，可以在下面添加条件，比如：\r\n    // CMD: typeof define === 'function' && define.cmd\r\n    // UMD: typeof exports === 'object'\r\n    if (typeof define === 'function' && define.amd) {\r\n        // AMD\r\n        define(['zepto'], factory);\r\n    } else {\r\n        factory(Zepto);\r\n        // 如果要兼容 Zepto，可以改写，比如使用：factory(Zepto||jQuery)\r\n    }\r\n}(function ($) {\r\n    'use strict';\r\n\r\n    /**\r\n     * 定义插件的构造方法\r\n     * @param element 选择器对象\r\n     * @param options 配置项\r\n     * @constructor\r\n     */\r\n    var Keyboard = function (element, options) {\r\n\r\n        //合并参数设置\r\n        this.options = $.extend({}, Keyboard.defaults, options);\r\n\r\n        //将选择器对象赋值给插件，方便后续调用\r\n        this.$element = $(element);\r\n\r\n        //进行一些初始化工作\r\n        this.init();\r\n    };\r\n    var kbPrivateMethod;\r\n\r\n    /**\r\n     * 插件名称，即调用时的名称（$.fn.pluginName）\r\n     * @type {string}\r\n     */\r\n    Keyboard.pluginName = \"keyboard\";\r\n\r\n    /**\r\n     * 插件缓存名称，插件通过 data 方法缓存在 dom 结构里，存储数据的名称\r\n     * @type {string}\r\n     */\r\n    Keyboard.dataName = \"keyboard\";\r\n\r\n    /**\r\n     * 插件版本\r\n     * @type {string}\r\n     */\r\n    Keyboard.version = \"2.0.0\";\r\n\r\n    /**\r\n     * 插件默认配置项\r\n     * @type {{}}\r\n     */\r\n    Keyboard.defaults = {\r\n      length: 7,\r\n      text: {\r\n        normal: '普通车牌录入',\r\n        energy: '新能源车牌录入'\r\n      },\r\n      title: '添加车牌',\r\n      buttonText: '添加',\r\n      isAddColor: false,\r\n      isAutoFill: true,\r\n      beforeOpenFn: null,\r\n      confirmCallback: null,\r\n      hiddenCallback: null,\r\n      scanCallback: null\r\n    };\r\n\r\n    /**\r\n     * 定义插件的方法\r\n     * @type {{}}\r\n     */\r\n    Keyboard.prototype = {\r\n      init: function () {\r\n        var _this = this;\r\n        if($('#keyboard_wrapper').length === 0 ) {\r\n            kbPrivateMethod._initKbHtml();\r\n        }\r\n        \r\n        this.$element.off('click').on('click',function(){\r\n          var isOpen = true;\r\n          $(this).blur();\r\n          if(_this.options.beforeOpenFn) {\r\n            isOpen = _this.options.beforeOpenFn();\r\n          }\r\n          if(isOpen) {\r\n            _this.initShowEvt();\r\n          }\r\n        })\r\n      },\r\n\r\n      initShowEvt: function(curVal, _len) {\r\n        var options = this.options;\r\n        var license = options.license;\r\n        curVal = kbPrivateMethod._getVal(this.$element, license);\r\n        _len = options.length;\r\n        var headerTxt = options.title;\r\n        var buttonTxt = options.buttonText;\r\n        $('#header_title').text(headerTxt);\r\n        $('#kb_confirm').text(buttonTxt);\r\n        this.changePlate(_len);\r\n        this.fillPlate(curVal,_len);\r\n        this.setConfirmBtn();\r\n        this.showKeyboard();\r\n        this.setMargin();\r\n        this.bindClickPanelEvts();\r\n      },\r\n\r\n      showKeyboard: function() {\r\n        var $Keyboard = $('#keyboard_wrapper');\r\n        if(!$Keyboard.hasClass('toggle')) {\r\n            $Keyboard.addClass('toggle');\r\n        }\r\n      },\r\n\r\n      hideKeyboard: function() {\r\n        var $Keyboard = $('#keyboard_wrapper'),\r\n            $CheckedColor = $('#keyboard_wrapper input[name=\"plate-color\"]:checked'),\r\n            plateColor = $CheckedColor.val();\r\n        if($Keyboard.hasClass('toggle')) {\r\n            $Keyboard.removeClass('toggle');\r\n        }\r\n        if ($CheckedColor.hasClass('green')) {\r\n           this.$element.data('color','');\r\n        } else {\r\n          this.$element.data('color',plateColor);\r\n        }\r\n        $Keyboard.find('.kb-item').removeAttr('style');\r\n        if(this.options.hiddenCallback) {\r\n            this.options.hiddenCallback(this.getLicense());\r\n        }\r\n      },\r\n\r\n      //获取当前已经选择的车牌， \r\n      getLicense: function(isLen) {\r\n        var $PlateItem = $('#plate_box').find('.plate-item:not(.ake-hide)'),\r\n            Val = '',\r\n            color = $('input[name=\"plate-color\"]:checked').val();\r\n        $PlateItem.each(function() {\r\n          var _val = $(this).text();\r\n          if(!_val) {return false;}\r\n          Val += _val;\r\n        })\r\n        return isLen ? Val.length : (this.options.isAddColor ? Val + color : Val);\r\n      },\r\n\r\n      changePlate: function (total_len) {\r\n        var $PlateBox = $('#keyboard_wrapper #plate_box'),\r\n            normal_text = this.options.text.normal,\r\n            energy_text = this.options.text.energy;\r\n        if(total_len == 7) {\r\n            $PlateBox.removeClass('has-eight-item');\r\n            $PlateBox.find('.eighth-item').text('').addClass('ake-hide');\r\n        } else if(total_len == 8) {\r\n            $PlateBox.addClass('has-eight-item');\r\n            $PlateBox.find('.eighth-item').text('').removeClass('ake-hide');\r\n        }\r\n      },\r\n\r\n      //填充已輸入的車牌\r\n      fillPlate: function (_license,total_len) {\r\n        var $PlateItem = $('#keyboard_wrapper #plate_box').find('.plate-item'),_idx = 0;\r\n        $PlateItem.text('');\r\n        if(_license) {\r\n            var licenseArr = _license.split('');\r\n            $.each(licenseArr, function(index, item) {\r\n              $PlateItem.eq(index).text(item);\r\n              _idx = index;\r\n            })\r\n            _idx = _idx + 1 < total_len ? _idx + 1 : total_len - 1;\r\n        }\r\n        $PlateItem.eq(_idx).addClass('active').siblings().removeClass('active');\r\n        this.togglePanel(_idx);\r\n      },\r\n\r\n      setMargin: function() {\r\n        var $KeyboardBox = $('#keyboard_box'),\r\n            $SingleKb = $KeyboardBox.find('.operate-list').find('.kb-item').eq(0),\r\n            box_width = $(window).width() - Number($KeyboardBox.css('padding-left').replace(/px/,'')) * 2, //键盘盒子宽度\r\n            single_width = $SingleKb.width(), //单个按键宽度\r\n            _single_width = single_width + Number($SingleKb.css('margin-left').replace(/px/,'')) * 2, //单个按键宽度\r\n            row_num = 0,margin = 0;\r\n        \r\n        row_num = Math.floor(box_width / _single_width); //计算一行放几个按键\r\n        margin = (box_width / row_num - single_width) / 2; // 计算每一个按键的左右margin\r\n\r\n        $KeyboardBox.find('.kb-item').css({'margin-left':margin,'margin-right': margin});\r\n      },\r\n      //切换\r\n      togglePanel: function (index) {\r\n        var $KeyboardItem = $('#keyboard_box').find('li:not(.operate-list)');\r\n        var _len = this.options.length;\r\n        var _license = this.getLicense();\r\n        function IsHkMacao() {\r\n            if(_license.indexOf('粤Z') > -1) {\r\n                $KeyboardItem.eq(1).find('.last-item').hide();\r\n                $KeyboardItem.eq(1).find('.hk-macao-item').show();\r\n            } else {\r\n                $KeyboardItem.eq(1).find('.last-item').show();\r\n                $KeyboardItem.eq(1).find('.hk-macao-item').hide();\r\n            }\r\n        }\r\n        $KeyboardItem.eq(2).find('.not-pos-two').removeClass('ake-hide');\r\n        switch (index) {\r\n          case 0: \r\n            $KeyboardItem.addClass('ake-hide');\r\n            $KeyboardItem.eq(0).removeClass('ake-hide');\r\n            break;\r\n          case 1:\r\n            $KeyboardItem.addClass('ake-hide');\r\n            $KeyboardItem.eq(2).removeClass('ake-hide');\r\n            $KeyboardItem.eq(1).find('.last-item,.not-pos-two').addClass('ake-hide');\r\n            break;\r\n          case 2:case 3:case 4: case 5:\r\n            $KeyboardItem.addClass('ake-hide');\r\n            $KeyboardItem.eq(1).removeClass('ake-hide');\r\n            $KeyboardItem.eq(2).removeClass('ake-hide');\r\n            $KeyboardItem.eq(1).find('.last-item').addClass('ake-hide');\r\n            break;\r\n          case 6:\r\n            $KeyboardItem.addClass('ake-hide');\r\n            $KeyboardItem.eq(1).removeClass('ake-hide');\r\n            $KeyboardItem.eq(2).removeClass('ake-hide');\r\n            if(_len == 7) {\r\n              $KeyboardItem.eq(1).find('.last-item').removeClass('ake-hide');\r\n              IsHkMacao();\r\n            } else {\r\n              $KeyboardItem.eq(1).find('.last-item').addClass('ake-hide');\r\n            }\r\n            \r\n            break;\r\n          case 7:\r\n            if(_len == 7) {break;}\r\n            $KeyboardItem.addClass('ake-hide');\r\n            $KeyboardItem.eq(1).removeClass('ake-hide');\r\n            $KeyboardItem.eq(2).removeClass('ake-hide');\r\n            $KeyboardItem.eq(1).find('.last-item').removeClass('ake-hide');\r\n            IsHkMacao();\r\n            break;\r\n          default: \r\n            $KeyboardItem.addClass('ake-hide');\r\n            $KeyboardItem.eq(0).removeClass('ake-hide');\r\n            break;\r\n        }\r\n      },\r\n\r\n      deleteOneEvts: function(isDelAll) {\r\n        var $PlateItem = $('#plate_box').find('.plate-item'),\r\n            _licenseLen = this.getLicense(1),\r\n            _index = _licenseLen;\r\n        if(isDelAll) {\r\n            $PlateItem.each(function(){\r\n                $(this).text('');\r\n            })\r\n            $PlateItem.eq(0).addClass('active').siblings().removeClass('active');\r\n            _index = 0;\r\n        } else {\r\n            if(_licenseLen > 0) {\r\n              $PlateItem.eq(_licenseLen - 1).text('').addClass('active').siblings().removeClass('active');\r\n              _index --;\r\n            } else {\r\n              $PlateItem.eq(0).addClass('active').siblings().removeClass('active');\r\n              _index = 0;\r\n            }\r\n        }\r\n        this.togglePanel(_index);\r\n      },\r\n\r\n      setConfirmBtn: function() {\r\n        var _length = this.options.length,\r\n            _licenseLen = this.getLicense(1),\r\n            type = $('#plate_type_title').data('type');\r\n        if(!type) {\r\n          if(_licenseLen == _length) {\r\n              $('#kb_confirm').removeClass('hide');\r\n          } else {\r\n              $('#kb_confirm').addClass('hide');\r\n          }\r\n        } else {\r\n          $('#kb_confirm').removeClass('hide');\r\n        }\r\n        \r\n      },\r\n\r\n      bindClickPanelEvts: function() {\r\n        var _this = this;\r\n        //点击关闭\r\n        $('#keyboard_wrapper #close_keyboard').off().on('click',function(e) {\r\n          _this.hideKeyboard();\r\n        })\r\n        \r\n        //点击选择某一个车牌\r\n        $('#plate_box .plate-item').off().on('click',function(e) {\r\n          e.stopPropagation();\r\n          var $This = $(this),\r\n              _txt = $This.text(),\r\n              _index = $This.index(),\r\n              _active = $('#plate_box').find('.active');\r\n          if (_txt) {\r\n            if(_index != _active) {\r\n              $This.addClass('active').siblings().removeClass('active');\r\n              _this.togglePanel(_index);\r\n            }\r\n          } else {\r\n            var _licenseLen = _this.getLicense(1);\r\n            $('#plate_box .plate-item').eq(_licenseLen).addClass('active').siblings().removeClass('active');\r\n            _this.togglePanel(_licenseLen);\r\n          }\r\n        })\r\n\r\n        // 点击每一个车牌键盘值\r\n        $('#keyboard_box .kb-item').off().on('click',function(e) {\r\n            e.stopPropagation();\r\n            if($(this).hasClass('placehold-item')){return;}\r\n            $('#keyboard_box .kb-item').removeClass('active');\r\n            var $This = $(this),\r\n                $PlateItem = $('#plate_box').find('.plate-item'),\r\n                _licenseLen = _this.getLicense(1),\r\n                _length = _this.options.length;\r\n            if($This.hasClass('clear-all')) {\r\n                _this.deleteOneEvts(1);\r\n                _this.setConfirmBtn();\r\n            } else if($This.hasClass('delete-one')) {\r\n                _this.deleteOneEvts();\r\n                _this.setConfirmBtn();\r\n            } else {\r\n              $This.addClass('active');\r\n              var _txt = $This.text(),\r\n                  _active = $('#plate_box').find('.active').index(),\r\n                  _index = _active;\r\n              if($This.hasClass('change-to-num') && _active > 1) {\r\n                _txt = _txt === 'O' ? '0' : '1';\r\n              }\r\n              \r\n              $PlateItem.eq(_active).text(_txt);\r\n              if(_active + 1 < _length) {\r\n                $PlateItem.eq(_active + 1).addClass('active').siblings().removeClass('active');\r\n                _active ++;\r\n              }\r\n              if(_active != _index) {\r\n                _this.togglePanel(_active);\r\n              }\r\n\r\n              _this.setConfirmBtn();\r\n              \r\n              setTimeout(function(){\r\n                $This.removeClass('active');\r\n              },100);\r\n            }\r\n        })\r\n\r\n        //点击切换新能源车牌和普通车牌录入\r\n        $('#keyboard_wrapper input[name=\"plate-color\"]').off().on('click',function(e){\r\n            e.stopPropagation();\r\n            var _type = 7;\r\n            if($(this).hasClass('green')) {\r\n              _type = 8;\r\n            }\r\n            var _licenseLen = -1,\r\n                _active = 0;\r\n            _this.options.length = _type;\r\n            _this.changePlate(_type);\r\n            _this.fillPlate('');\r\n\r\n            // _licenseLen = _this.getLicense(1);\r\n            // _active = _licenseLen < _type ? _licenseLen : _type - 1;\r\n            _this.togglePanel(_active);\r\n            _this.setConfirmBtn();\r\n            $('#plate_box .plate-item').eq(_active).addClass('active').siblings().removeClass('active');\r\n        })\r\n\r\n        //点击确定\r\n        $('#kb_confirm').off().on('click',function(e) {\r\n            e.stopPropagation();\r\n            var _type = Number($('#plate_type_title').data('type')),\r\n                result = '';\r\n            result = !_type ? _this.getLicense() : $('#cardTicketText').val();\r\n            if(_this.options.isAutoFill) {\r\n                kbPrivateMethod._setVal(_this.$element, result);\r\n            }\r\n            if(_this.options.confirmCallback) {\r\n                _this.options.confirmCallback(result);\r\n            }\r\n            _this.hideKeyboard();\r\n        })\r\n\r\n        $('#scanCode').off().on('click', function() {\r\n          if(_this.options.scanCallback) {\r\n            var result = _this.options.scanCallback();\r\n            $('#cardTicketText').val(result);\r\n          }\r\n        })\r\n\r\n        $('#plate_type_title').off().on('click', function() {\r\n          var _type = Number($(this).data('type')),\r\n              $PlateBox = $('#plate_box'),\r\n              $CardTickerBox = $('#cardTickt_box'),\r\n              $PlateColorBox = $('#keyboard_wrapper .blue-plate-box'),\r\n              $KeyboardBox = $('#keyboard_box'),\r\n              $ConfirmBtn = $('#kb_confirm');\r\n          if(_type) {\r\n            $(this).text('卡票号录入>>').data('type', 0);\r\n            $CardTickerBox.hide();\r\n            $PlateBox.show();\r\n            $PlateColorBox.show();\r\n            $KeyboardBox.show();\r\n            _this.fillPlate('');\r\n          } else {\r\n            $(this).text('车牌录入>>').data('type', 1);\r\n            $PlateBox.hide();\r\n            $CardTickerBox.show();\r\n            $PlateColorBox.hide();\r\n            $KeyboardBox.hide();\r\n            $ConfirmBtn.removeClass('hide');\r\n            $('#cardTicketText').val('');\r\n          }\r\n          _this.setConfirmBtn();\r\n        })\r\n      }\r\n    };\r\n\r\n    //私有方法\r\n    kbPrivateMethod = (function () {\r\n      //獲取自定義鍵盤的html模板和css文件\r\n      function _getTemplate () {\r\n        var cssFile = '<link rel=\"stylesheet\" href=\"dist/css/keyboard.min.css\">';\r\n        var _template = '<div id=\"keyboard_wrapper\" class=\"keyboard-wrapper\">'+\r\n            '        <div class=\"keyboard-header\">'+\r\n            '          <h3 id=\"header_title\" class=\"header-title\">添加车牌</h3>'+\r\n            '          <a id=\"close_keyboard\" class=\"close\">&times;</a>'+\r\n            '          <a id=\"kb_confirm\" class=\"add-btn\">添加</a>'+\r\n            '        </div>'+\r\n            '        <div class=\"plate-wrapper\">'+\r\n            '          <div id=\"plate_box\" class=\"plate-box\">'+\r\n            '            <span class=\"plate-item\"></span>'+\r\n            '            <span class=\"plate-item\"></span>'+\r\n            '            <span class=\"plate-item\"></span>'+\r\n            '            <span class=\"plate-item\"></span>'+\r\n            '            <span class=\"plate-item\"></span>'+\r\n            '            <span class=\"plate-item\"></span>'+\r\n            '            <span class=\"plate-item\"></span>'+\r\n            '            <span class=\"plate-item eighth-item\"></span>'+\r\n            '          </div>'+\r\n            '          <div id=\"cardTickt_box\" class=\"plate-box card-ticket-box ake-hide\">'+\r\n            '            <input type=\"text\" class=\"card-ticket-text\" id=\"cardTicketText\">'+\r\n            '            <i id=\"scanCode\" class=\"scan-icon\"></i>'+\r\n            '          </div>'+\r\n            '          <div class=\"plate-setting\">'+\r\n            '            <div class=\"blue-plate-box clearfix\">'+\r\n            '<div class=\"iradio-box \">'+\r\n            '                <input type=\"radio\" name=\"plate-color\" id=\"blue\" class=\"iradio blue\" value=\"蓝\" checked><i class=\"icon\"></i>'+\r\n            '                <label class=\"iradio-text blue\" for=\"blue\">蓝牌</label>'+\r\n            '              </div>'+\r\n            '              <div class=\"iradio-box \">'+\r\n            '                <input type=\"radio\" name=\"plate-color\" id=\"yellow\" class=\"iradio yellow\" value=\"黄\"><i class=\"icon\"></i>'+\r\n            '                <label class=\"iradio-text yellow\" for=\"yellow\">黄牌</label>'+\r\n            '              </div>'+\r\n            '              <div class=\"iradio-box \">'+\r\n            '                <input type=\"radio\" name=\"plate-color\" id=\"white\" class=\"iradio white\" value=\"白\"><i class=\"icon\"></i>'+\r\n            '                <label class=\"iradio-text white\" for=\"white\">白牌</label>'+\r\n            '              </div>'+\r\n            '              <div class=\"iradio-box \">'+\r\n            '                <input type=\"radio\" name=\"plate-color\" id=\"black\" class=\"iradio black\" value=\"黑\"><i class=\"icon\"></i>'+\r\n            '                <label class=\"iradio-text black\" for=\"black\">黑牌</label>'+\r\n            '              </div>' +\r\n            '              <div class=\"iradio-box \">'+\r\n            '                <input type=\"radio\" name=\"plate-color\" id=\"green\" class=\"iradio green\" value=\"\"><i class=\"icon\"></i>'+\r\n            '                <label class=\"iradio-text green\" for=\"green\">新能源</label>'+\r\n            '              </div>'+\r\n            '            </div>'+\r\n            '            <div class=\"plate-type-box\">'+\r\n            '              <span id=\"plate_type_title\" class=\"plate-type\" data-type=\"0\">卡票号录入&gt;&gt;</span>'+\r\n            '            </div>'+\r\n            '          </div>'+\r\n            // '          <a id=\"kb_confirm\" class=\"ake-btn confirm-btn hide\"><span class=\"lt20\">确</span>定</a>'+\r\n            '        </div>'+\r\n            '        <div class=\"keyboard-container\">'+\r\n            '          <ul id=\"keyboard_box\" class=\"keyboard-box\">'+\r\n            '            <li class=\"keyboard-list\">'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">京</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">沪</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">粤</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">津</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">浙</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">苏</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">湘</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">渝</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">云</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">豫</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">皖</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">陕</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">桂</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">新</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">青</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">琼</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">闽</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">蒙</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">辽</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">宁</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">鲁</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">晋</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">吉</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">冀</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">黑</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">台</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">甘</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">鄂</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">赣</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">贵</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">川</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">藏</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item placehold-item\"></a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item placehold-item\"></a>'+\r\n            '            </li>'+\r\n            '            <li class=\"keyboard-list ake-hide\">'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">1</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">2</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">3</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">4</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">5</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">6</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">7</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">8</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">9</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">0</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item last-item ake-hide\">学</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item last-item ake-hide\">警</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item last-item hk-macao-item ake-hide\">港</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item last-item hk-macao-item ake-hide\">澳</a>'+\r\n            '            </li>'+\r\n            '            <li class=\"keyboard-list ake-hide\">'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">A</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">B</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">C</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">D</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">E</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">F</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">G</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">H</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item not-pos-two change-to-num\">I</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">J</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">K</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">L</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">M</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">N</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item change-to-num\">O</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">P</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">Q</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">R</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">S</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">T</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">U</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">V</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">W</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">X</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">Y</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item\">Z</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item placehold-item\"></a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item placehold-item\"></a>'+\r\n            '            </li>'+\r\n            '            <li class=\"keyboard-list operate-list\">'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item clear-all\">重输</a>'+\r\n            '              <a href=\"javascript:void(0)\" class=\"kb-item delete-one\"><span class=\"delete-icon\">&times;</span></a>'+\r\n            '            </li>'+\r\n            '          </ul>'+\r\n            '        </div>'+\r\n            '      </div>';\r\n        return {\r\n            css: cssFile,\r\n            html: _template\r\n        }\r\n      }\r\n      //初始\r\n      function _initKbHtml () {\r\n        var _template = _getTemplate();\r\n        $('html').find('head').eq(0).append(_template.css);\r\n        $('body').append(_template.html);\r\n      }\r\n\r\n      //判断绑定插件的元素时输入型的还是显示型的\r\n      function _judgeEleType ($ele) {\r\n        var _nodeName = $ele.get(0).nodeName,\r\n            isInput = false;\r\n        if(_nodeName == 'INPUT' || _nodeName == 'TEXTAREA') {\r\n          isInput = true;\r\n        }\r\n        return isInput;\r\n      }\r\n\r\n      //根据绑定插件元素的不同类型，取值和设置值的方式相应变化\r\n      function _getVal($ele, value) {\r\n        var Val = '';\r\n        var placeholder = '';\r\n        if(value == undefined) {\r\n          var isInput = _judgeEleType($ele);\r\n          Val = isInput ? $ele.val() : $ele.text();\r\n          placeholder = $ele.attr('placeholder');\r\n        } else {\r\n          Val = value;\r\n        }\r\n        return Val == placeholder ? '' : Val; //当元素类型为显示型的，则当其text的值与placeholder的值相等时，认为其值为空\r\n      }\r\n\r\n      function _setVal($ele, Val) {\r\n        var isInput = _judgeEleType($ele);\r\n        if(isInput) {\r\n          $ele.val(Val);\r\n        } else {\r\n          //如果值为空的时候，显示\r\n          $ele.text(Val ? Val : $ele.attr('placeholder'));\r\n        }\r\n      }\r\n\r\n      return {\r\n        _getTemplate: _getTemplate,\r\n        _initKbHtml: _initKbHtml,\r\n        _judgeEleType: _judgeEleType,\r\n        _getVal: _getVal,\r\n        _setVal: _setVal\r\n      }\r\n    })();\r\n\r\n    /**\r\n     * 缓存同名插件\r\n     */\r\n    var old = $.fn[Keyboard.pluginName];\r\n\r\n    /**\r\n     * 定义插件，扩展$.fn，为Zepto对象提供新的插件方法\r\n     * 调用方式：$.fn.pluginName()\r\n     * @param option {string/object}\r\n     */\r\n    $.fn[Keyboard.pluginName] = function (option) {\r\n        return this.each(function () {\r\n            var $this = $(this);\r\n\r\n            var data = $.fn[Keyboard.pluginName].kbData[$this.data(Keyboard.dataName)];\r\n            var options = typeof option == 'object' && option;\r\n\r\n            //只实例化一次，后续如果再次调用了该插件时，则直接获取缓存的对象\r\n            if (!data) {\r\n                //zepto的data方法只能保存字符串，所以用此方法解决一下\r\n                $.fn[Keyboard.pluginName].kbData[++$.fn[Keyboard.pluginName].kbData.index] = new Keyboard(this, options);\r\n                $this.data(Keyboard.dataName, $.fn[Keyboard.pluginName].kbData.index);\r\n                data = $.fn[Keyboard.pluginName].kbData[$this.data(Keyboard.dataName)];\r\n            }\r\n\r\n            //如果插件的参数是一个字符串，则直接调用插件的名称为此字符串方法\r\n            if (typeof option == 'string') data[option]();\r\n        });\r\n    };\r\n\r\n    /**\r\n     * zepto的data方法只能保存字符串，所以用一个对象来存储data\r\n     * @type {{index: number}}\r\n     */\r\n    $.fn[Keyboard.pluginName].kbData = {index: 0};\r\n\r\n    $.fn[Keyboard.pluginName].Constructor = Keyboard;\r\n\r\n    /**\r\n     * 为插件增加 noConflict 方法，在插件重名时可以释放控制权\r\n     * @returns {*}\r\n     */\r\n    $.fn[Keyboard.pluginName].noConflict = function () {\r\n        $.fn[Keyboard.pluginName] = old;\r\n        return this\r\n    };\r\n\r\n    /**\r\n     * 可选：\r\n     * 通过在 dom 上定义 data-role='pluginName' 的方式，自动实例化插件，省去页面编写代码\r\n     * 在这里还可以扩展更多配置，仅仅通过 data 属性 API 就能使用插件\r\n     */\r\n    $(document).ready(function () {\r\n        $('[data-role=\"' + Keyboard.pluginName + '\"]').each(function () {\r\n            var $this = $(this);\r\n            var opts = {};\r\n            var data = $.fn[Keyboard.pluginName].kbData[$this.data(Keyboard.dataName)];\r\n\r\n            opts['length'] = $this.data('length');\r\n            opts['hiddenCallback'] = $this.data('hiddenCallback');\r\n\r\n            $(this).data('color','blue');//默认为蓝牌\r\n\r\n            $.fn[Keyboard.pluginName].call($this, opts);\r\n        });\r\n    });\r\n}));\r\n\r\n"]}